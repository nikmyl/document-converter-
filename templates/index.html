<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Convert documents between Markdown, Word (DOCX), PDF, and LaTeX formats instantly">
    <meta name="theme-color" content="#667eea">
    <title>Document Converter - MD, DOCX, PDF & LaTeX</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>
    <noscript>
        <div style="padding: 20px; background: #fef2f2; color: #991b1b; text-align: center; margin: 20px;">
            <h2>JavaScript Required</h2>
            <p>This document converter requires JavaScript to function. Please enable JavaScript in your browser settings.</p>
        </div>
    </noscript>
    <div class="container">
        <header>
            <h1>Document Converter</h1>
            <p class="subtitle">Convert between Markdown, Word, PDF, and LaTeX instantly</p>
            <div class="conversion-badges">
                <span class="badge">.md ⇄ .docx</span>
                <span class="badge-separator">|</span>
                <span class="badge">.md ⇄ .pdf</span>
                <span class="badge-separator">|</span>
                <span class="badge">.md ⇄ .tex</span>
                <span class="badge-separator">|</span>
                <span class="badge">.docx ⇄ .pdf</span>
            </div>
        </header>

        <main>
            <!-- Mode Toggle -->
            <div class="mode-toggle" role="group" aria-label="Conversion mode selection">
                <button id="single-mode-btn" class="mode-btn active" aria-pressed="true" aria-describedby="single-mode-desc">Single File</button>
                <button id="batch-mode-btn" class="mode-btn" aria-pressed="false" aria-describedby="batch-mode-desc">Batch / Folder</button>
                <span id="single-mode-desc" class="visually-hidden">Convert one file at a time</span>
                <span id="batch-mode-desc" class="visually-hidden">Convert multiple files or a ZIP archive</span>
            </div>

            <!-- Single File Drop Zone -->
            <div id="drop-zone" class="drop-zone" role="region" aria-labelledby="drop-zone-title" tabindex="0" aria-describedby="supported-formats">
                <div class="drop-zone-content">
                    <svg class="icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">
                        <title>Upload icon</title>
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12" />
                    </svg>
                    <h2 id="drop-zone-title">Drag & Drop your file here</h2>
                    <p>or</p>
                    <label for="file-input" class="file-label">
                        <span class="browse-button" role="button" tabindex="0">Browse Files</span>
                    </label>
                    <input type="file" id="file-input" accept=".md,.markdown,.txt,.docx,.pdf,.tex,.latex" hidden aria-label="Select a file to convert">
                    <input type="file" id="file-input-multiple" accept=".md,.markdown,.txt,.docx,.pdf,.tex,.latex,.zip" multiple hidden aria-label="Select multiple files to convert">
                    <p class="file-info" id="supported-formats">Supported: .md, .markdown, .txt, .docx, .pdf, .tex (max 16MB)</p>
                </div>
            </div>

            <!-- Single File Info -->
            <div id="file-info" class="file-info-container hidden" role="region" aria-label="Selected file information">
                <div class="file-details">
                    <svg class="file-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">
                        <title>Document icon</title>
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
                    </svg>
                    <div class="file-text">
                        <p class="file-name" id="file-name">No file selected</p>
                        <p class="file-size" id="file-size"></p>
                    </div>
                </div>
                <p class="convert-prompt" id="format-prompt">Choose output format:</p>
                <div id="convert-buttons-container" class="convert-buttons-container" role="group" aria-labelledby="format-prompt">
                    <!-- Buttons will be populated by JavaScript based on source file type -->
                </div>
            </div>

            <!-- Batch File Info -->
            <div id="batch-file-info" class="file-info-container hidden">
                <div class="batch-header">
                    <svg class="file-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10" />
                    </svg>
                    <div class="batch-summary">
                        <p class="batch-title" id="batch-title">Multiple files selected</p>
                        <p class="batch-count" id="batch-count">0 files ready for conversion</p>
                    </div>
                </div>
                <div id="batch-file-list" class="batch-file-list">
                    <!-- File list will be populated by JavaScript -->
                </div>
                <div class="batch-stats">
                    <div class="stat">
                        <span class="stat-label">Markdown:</span>
                        <span id="md-count" class="stat-value">0</span>
                    </div>
                    <div class="stat">
                        <span class="stat-label">Word:</span>
                        <span id="docx-count" class="stat-value">0</span>
                    </div>
                    <div class="stat">
                        <span class="stat-label">PDF:</span>
                        <span id="pdf-count" class="stat-value">0</span>
                    </div>
                    <div class="stat">
                        <span class="stat-label">LaTeX:</span>
                        <span id="tex-count" class="stat-value">0</span>
                    </div>
                </div>
                <p class="batch-note">Output will be organized in MD/, DOCX/, PDF/, and TEX/ folders</p>
                <button id="batch-convert-button" class="convert-button">Convert All</button>
            </div>

            <div id="progress" class="progress-container hidden" role="status" aria-live="polite" aria-label="Conversion progress">
                <div class="spinner" aria-hidden="true"></div>
                <p id="progress-text" aria-live="polite">Converting your file...</p>
                <button type="button" id="cancel-button" class="cancel-button" aria-label="Cancel conversion">Cancel</button>
            </div>

            <div id="success" class="message success hidden" role="alert" aria-live="polite">
                <svg class="message-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">
                    <title>Success</title>
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
                </svg>
                <p id="success-message">Conversion successful! Your download should start automatically.</p>
                <button id="reset-button" class="reset-button" aria-label="Convert another file">Convert More Files</button>
            </div>

            <div id="error" class="message error hidden" role="alert" aria-live="assertive">
                <svg class="message-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">
                    <title>Error</title>
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                </svg>
                <p id="error-message">An error occurred</p>
                <button id="error-reset-button" class="reset-button" aria-label="Try converting again">Try Again</button>
            </div>
        </main>

        <footer>
            <div class="features">
                <div class="feature">
                    <svg class="feature-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4" />
                    </svg>
                    <h3>4 Formats</h3>
                    <p>MD, DOCX, PDF & TEX</p>
                </div>
                <div class="feature">
                    <svg class="feature-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10" />
                    </svg>
                    <h3>Batch Mode</h3>
                    <p>Convert entire folders</p>
                </div>
                <div class="feature">
                    <svg class="feature-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z" />
                    </svg>
                    <h3>Fast</h3>
                    <p>Instant conversion</p>
                </div>
            </div>
        </footer>
    </div>

    <script src="{{ url_for('static', filename='js/script.js') }}"></script>
</body>
</html>
